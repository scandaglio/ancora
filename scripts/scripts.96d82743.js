"use strict";angular.module("ancoraApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.bootstrap","angular-loading-bar","btford.markdown","com.2fdevs.videogular","com.2fdevs.videogular.plugins.poster","ng.deviceDetector"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/home.html",controller:"HomeCtrl",controllerAs:"home"}).when("/prologo",{templateUrl:"views/prologo.html",controller:"PrologoCtrl",controllerAs:"prologo",resolve:{melchiorre:["apiService",function(a){return a.getFile("data/melchiorre.json")}],isola:["apiService",function(a){return a.getFile("data/isola.json")}],centro:["apiService",function(a){return a.getFile("data/centro.json")}],darsena:["apiService",function(a){return a.getFile("data/darsena.json")}],naviglio:["apiService",function(a){return a.getFile("data/naviglio.json")}]}}).when("/cover/:area",{templateUrl:"views/cover.html",controller:"CoverCtrl",controllerAs:"cover"}).when("/connection/:area",{templateUrl:"views/connection.html",controller:"ConnectionCtrl",controllerAs:"connection",resolve:{airbnb:["apiService","$route",function(a,b){return a.getFile("data/airbnb.tsv",b.current.params.area)}],idealista:["apiService","$route",function(a,b){return a.getFile("data/idealista.tsv",b.current.params.area)}],osm:["apiService","$route",function(a,b){return a.getFile("data/osm.tsv",b.current.params.area)}],pgt:["apiService","$route",function(a,b){return a.getFile("data/pgt.tsv",b.current.params.area)}],area:["apiService","$route",function(a,b){return a.getFile("data/"+b.current.params.area+".json")}],naviglio:["apiService","$route",function(a,b){return a.getFile("data/naviglio.json")}],startend:["apiService","$route",function(a,b){return a.getFile("data/startend.tsv",b.current.params.area)}]}}).when("/epilogo",{templateUrl:"views/epilogo.html",controller:"EpilogoCtrl",controllerAs:"epilogo"}).when("/data",{templateUrl:"views/data.html",controller:"DataCtrl",controllerAs:"data"}).otherwise({redirectTo:"/"})}]),angular.module("ancoraApp").controller("HomeCtrl",["$scope","$sce","$window",function(a,b,c){var d=c.innerWidth/c.innerHeight,e=16/9;a.videoClass=e>=d?"videoH":"videoW",a.title="La scoperta del Naviglio",a.onPlayerReady=function(b){a.videoAPI=b,a.videoAPI.setVolume(0)},a.videoconfig={sources:[{src:b.trustAsResourceUrl("videos/home.mp4"),type:"video/mp4"}],plugins:{poster:"images/home.21b60460.png"}}}]),angular.module("ancoraApp").controller("PrologoCtrl",["$scope","$sce","melchiorre","isola","centro","darsena","naviglio",function(a,b,c,d,e,f,g){a.geometries={melchiorre:c,isola:d,centro:e,darsena:f,naviglio:g}}]),angular.module("ancoraApp").controller("CoverCtrl",["$scope","$routeParams","$sce","$window",function(a,b,c,d){var e=d.innerWidth/d.innerHeight,f=16/9;a.videoClass=f>=e?"videoH":"videoW",a.area=b.area,a.mdUrl="texts/"+b.area+".md",a.onPlayerReady=function(b){a.videoAPI=b,a.videoAPI.setVolume(0)},a.videoconfig={sources:[{src:c.trustAsResourceUrl("videos/"+a.area+".mp4"),type:"video/mp4"}],plugins:{poster:"images/cover-"+a.area+".png"}}}]),angular.module("ancoraApp").controller("ConnectionCtrl",["$scope","$routeParams","$sce","airbnb","idealista","osm","pgt","area","naviglio","startend","$window","deviceDetector",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a,b){var a=d3.nest().key(function(a){return a[b]}).rollup(function(a){return a.length}).entries(a);return a=a.sort(function(a,b){return d3.descending(a.value,b.value)})}var n=k.innerWidth/k.innerHeight,o=16/9;a.videoClass=o>=n?"videoH":"videoW",a.areaTitle=b.area,a.area=h,a.naviglio=i,a.airbnb=d,a.idealista=e,a.osm=f,a.browser=l.browser;var p,q=[{slug:"melchiorre",label:"Melchiorre Gioia"},{slug:"isola",label:"Isola / Porta Nuova"},{slug:"centro",label:"Centro Storico"},{slug:"darsena",label:"Darsena"}];q.forEach(function(b,c){b.slug==a.areaTitle&&(p=c)}),a.next=p<q.length-1?"cover/"+q[p+1].slug:"epilogo",a.nextLabel=p<q.length-1?q[p+1].label:"epilogo",a.prev=p>0?"cover/"+q[p-1].slug:"prologo",a.prevLabel=p>0?q[p-1].label:"prologo",a.pgtCategory=["Cultura","Istruzione","Salute","Servizi Sociali","Amministrativo","Attrezzature religiose","Università e ricerca","Sport","Sicurezza e Protezione Civile","Edilizia Residenziale Sociale","Giustizia"],a.osmCategory=["ristorante","bar","banca","distributore automatico","taxi","parcheggio","pub","fast food","area gioco","club","società"],a.pgt=g,a.startend=j,a.startTime=j.filter(function(a){return"start"==a.type})[0].startTime,a.endTime=j.filter(function(a){return"end"==a.type})[0].startTime,a.chartOsm=m(a.osm,"category"),a.chartPgt=m(a.pgt,"category"),a.chartRent=[{key:"airbnb",value:a.airbnb.length},{key:"idealista",value:a.idealista.length}],a.onPlayerReady=function(b){a.videoAPI=b,a.videoAPI.seekTime(+a.startTime)};var r="safari"==a.browser?"path.mp4#t="+a.startTime:"path.mp4";a.videoconfig={sources:[{src:c.trustAsResourceUrl("videos/"+r),type:"video/mp4"}],plugins:{poster:"images/connection-"+a.areaTitle+".png"}},a.onUpdateTime=function(b,c){a.currentTime=b,a.currentTime>=+a.endTime&&a.videoAPI.pause()};var s=function(){var a=k.innerWidth;return 768>a?!1:a>=768&&992>a?!1:a>=992&&1200>a?!0:a>=1200?!0:void 0};a.breakpoint=s()}]),angular.module("ancoraApp").controller("EpilogoCtrl",["$scope","$routeParams","$sce","$window",function(a,b,c,d){var e=d.innerWidth/d.innerHeight,f=16/9;a.videoClass=f>=e?"videoH":"videoW",a.title="Milano scoperta:<br>riaprire i Navigli<br>per una città cartolina",a.onPlayerReady=function(b){a.videoAPI=b,a.videoAPI.setVolume(0)},a.videoconfig={sources:[{src:c.trustAsResourceUrl("videos/epilogo.mp4"),type:"video/mp4"}],plugins:{poster:"images/epilogo.cfd6101f.png"}}}]),angular.module("ancoraApp").service("apiService",["$q","$http",function(a,b){return{getFile:function(c,d){var e=a.defer();return b.get(c).success(function(a){if(d){var b=d3.tsvParse(a).filter(function(a){return a.area==d});e.resolve(b)}else e.resolve(a)}).error(function(){e.reject("An error occured while fetching file")}),e.promise}}}]),angular.module("ancoraApp").directive("mapconnection",["togeojsonFilter","$timeout",function(a,b){return{restrict:"A",replace:!1,link:function(c,d,e){var f,g=d3.select(d[0]).style("opacity",0),h=a(c.startend,["type","startTime"]),i=h.features.filter(function(a){return"start"==a.properties.type})[0],j=h.features.filter(function(a){return"end"==a.properties.type})[0],k=turf.explode(c.naviglio).features.map(function(a){return a.geometry.coordinates}),l=turf.lineString(k.reverse()),m=turf.lineSlice(i,j,l),n=turf.lineDistance(m,"kilometers"),o=(+j.properties.startTime-+i.properties.startTime,d3.scaleLinear().domain([+i.properties.startTime,+j.properties.startTime]).range([0,n])),p=turf.centroid(c.area);mapboxgl.accessToken="pk.eyJ1IjoidGVvIiwiYSI6IllvZUo1LUkifQ.dirqtn275pAKdnqtLM2HSw";var q=new mapboxgl.Map({container:d[0],style:"mapbox://styles/teo/ciu1f5enw00i52iol853ypazc",center:p.geometry.coordinates,interactive:!1,minZoom:8,maxZoom:17,zoom:13}),r=turf.bbox(c.area);q.fitBounds([[r[0],r[1]],[r[2],r[3]]],{padding:50}),q.on("load",function(){q.setLayoutProperty("road","visibility","none"),q.setLayoutProperty("water","visibility","none"),q.setLayoutProperty("building","visibility","none"),q.setLayoutProperty("landuse","visibility","none"),q.addSource("area",{type:"geojson",data:c.area}),q.addLayer({id:"area",type:"line",source:"area",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgba(255,255,255,1)","line-width":2}}),q.addSource("naviglio",{type:"geojson",data:c.naviglio}),q.addLayer({id:"naviglio",type:"line",source:"naviglio",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgba(255,255,255,1)","line-width":1}}),q.addSource("airbnb",{type:"geojson",data:a(c.airbnb,["price"])}),q.addLayer({id:"airbnb",type:"circle",source:"airbnb",paint:{"circle-color":"rgba(255,255,255,0.75)","circle-radius":2}}),q.addSource("idealista",{type:"geojson",data:a(c.idealista,["price"])}),q.addLayer({id:"idealista",type:"circle",source:"idealista",paint:{"circle-color":"rgba(255,255,255,0.75)","circle-radius":2}}),q.addSource("pgt",{type:"geojson",data:a(c.pgt,["category"])}),q.addLayer({id:"pgt",type:"circle",source:"pgt",paint:{"circle-color":"rgba(255,255,255,0.75)","circle-radius":2}}),q.addSource("osm",{type:"geojson",data:a(c.osm,["category"])}),q.addLayer({id:"osm",type:"circle",source:"osm",paint:{"circle-color":"rgba(255,255,255,0.75)","circle-radius":2}}),q.addSource("pointer",{type:"geojson",data:i}),q.addLayer({id:"pointerBorder",type:"circle",source:"pointer",paint:{"circle-color":"#000","circle-radius":7}}),q.addLayer({id:"pointer",type:"circle",source:"pointer",paint:{"circle-color":"#fff"}});var e=d3.select(d[0]).append("div");e.attr("class","markerPlay"),e.append("span").attr("class","glyphicon glyphicon-pause"),e.on("click",function(a){c.videoAPI.playPause(),"play"==c.videoAPI.currentState?d3.select(this).select(".glyphicon").classed("glyphicon-pause",!0).classed("glyphicon-play",!1):d3.select(this).select(".glyphicon").classed("glyphicon-pause",!1).classed("glyphicon-play",!0)}),f=new mapboxgl.Marker(e.node(),{offset:[-12,-12]}).setLngLat(i.geometry.coordinates).addTo(q),g.transition().duration(500).style("opacity",1),b(function(){c.videoAPI.play()},1500)}),c.$watch("currentTime",function(a,b){if(a!=b&&a&&a>o.domain()[0]&&a<o.domain()[1]){var c=o(a),d=turf.along(m,c,"kilometers");q.getSource("pointer").setData(d),f.setLngLat(d.geometry.coordinates)}})}}}]),angular.module("ancoraApp").filter("togeojson",function(){return function(a,b){var c=[];return a.forEach(function(a){var d={};b.forEach(function(b){d[b]=a[b]}),c.push(turf.point([+a.lon,+a.lat],d))}),c=turf.featureCollection(c)}}),angular.module("ancoraApp").directive("barchart",function(){return{restrict:"A",replace:!1,template:"",scope:{data:"=",ydomain:"="},link:function(a,b,c){var d=a.data,e=d3.select(b[0]),f=c.height?+c.height:e.node().getBoundingClientRect().height,g=c.width?+c.width:e.node().getBoundingClientRect().width,h=c.marginleft?+c.marginleft:g/2,i=e.append("svg").attr("width",g).attr("height",f),j={top:10,right:25,bottom:5,left:h},k=g-j.left-j.right,l=f-j.top-j.bottom,m=d3.scaleBand().rangeRound([0,l]).padding(.1),n=d3.scaleLinear().rangeRound([0,k]),o=i.append("g").attr("transform","translate("+j.left+","+j.top+")");a.ydomain?(d=d.filter(function(b){return a.ydomain.indexOf(b.key)>-1}),m.domain(a.ydomain)):m.domain(d.map(function(a){return a.key})),n.domain([0,d3.max(d,function(a){return a.value})]),o.append("g").attr("class","axis axis--y").call(d3.axisLeft(m)),o.selectAll(".bar").data(d).enter().append("rect").attr("class","bar").attr("x",function(a){return 0}).attr("y",function(a){return m(a.key)}).attr("fill","white").attr("height",m.bandwidth()).attr("width",function(a){return n(0)}).transition().duration(500).attr("width",function(a){return n(a.value)}),o.selectAll(".barValue").data(d).enter().append("text").attr("class","barValue").attr("alignment-baseline","central").attr("text-anchor","end").attr("x",function(a){return n(a.value)<10?n(a.value)+8:n(a.value)-2}).attr("y",function(a){return m(a.key)+m.bandwidth()/2}).attr("fill",function(a){return n(a.value)<10?"white":"black"}).attr("opacity",0).text(function(a){return a.value}).transition().duration(500).attr("opacity",1)}}}),angular.module("ancoraApp").directive("candlestick",function(){return{restrict:"A",replace:!1,scope:{data:"="},link:function(a,b,c){var d=a.data,e=d3.select(b[0]),f=c.height?+c.height:e.node().getBoundingClientRect().height,g=c.width?+c.width:e.node().getBoundingClientRect().width,h=e.append("svg").attr("width",g).attr("height",f),i={top:10,right:25,bottom:10,left:180},j=g-i.left-i.right,k=f-i.top-i.bottom,l=d3.scaleLinear().rangeRound([0,j]),m=h.append("g").attr("transform","translate("+i.left+","+i.top+")"),n=d3.median(d,function(a){return+a.price});l.domain(d3.extent(d,function(a){return+a.price})),m.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+k/2+")").call(d3.axisBottom(l).ticks(0)),m.selectAll(".circle").data([l.domain()[0],n,l.domain()[1]]).enter().append("circle").attr("class","circle").attr("cx",function(a){return l(a)}).attr("cy",k/2).attr("r",2).attr("fill","white").attr("stroke","black").filter(function(a,b){return 1==b}).attr("r",4).attr("cx",function(a){return l(0)}).transition().duration(500).attr("cx",function(a){return l(a)}),m.append("text").attr("class","legendText").attr("x",-15).attr("y",k/2).attr("text-anchor","end").attr("alignment-baseline","central").text(c.legend).attr("fill","white"),m.selectAll(".legend").data([l.domain()[0],n,l.domain()[1]]).enter().append("text").attr("class","legend").attr("x",function(a){return l(a)}).attr("y",k/2+20).attr("text-anchor","middle").text(function(a){return a}).attr("fill","white").filter(function(a,b){return 1==b}).attr("y",k/2-10).text(function(a){return a+"€"}).attr("opacity",0).transition().duration(500).attr("opacity",1)}}}),angular.module("ancoraApp").directive("bgMap",["$window",function(a){return{replace:!1,restrict:"A",link:function(b,c,d){if(!(a.innerWidth<768)){mapboxgl.accessToken="pk.eyJ1IjoidGVvIiwiYSI6IllvZUo1LUkifQ.dirqtn275pAKdnqtLM2HSw";var e=new mapboxgl.Map({container:c[0],center:[9.1859,45.4654],zoom:12,maxZoom:16,minZoom:10,interactive:!1,style:"mapbox://styles/teo/ciu1f5enw00i52iol853ypazc"}),f=turf.bbox(turf.featureCollection([b.geometries.melchiorre.features[0],b.geometries.isola.features[0],b.geometries.centro.features[0],b.geometries.darsena.features[0]]));e.fitBounds([[f[0],f[1]],[f[2],f[3]]],{padding:100,offset:[200,0]}),e.on("load",function(){e.addSource("melchiorre",{type:"geojson",data:b.geometries.melchiorre}),e.addLayer({id:"melchiorre",type:"fill",source:"melchiorre",layout:{},paint:{"fill-color":"#fff","fill-opacity":.8,"fill-outline-color":"black"}}),e.addSource("isola",{type:"geojson",data:b.geometries.isola}),e.addLayer({id:"isola",type:"fill",source:"isola",layout:{},paint:{"fill-color":"#fff","fill-opacity":.8,"fill-outline-color":"black"}}),e.addSource("centro",{type:"geojson",data:b.geometries.centro}),e.addLayer({id:"centro",type:"fill",source:"centro",layout:{},paint:{"fill-color":"#fff","fill-opacity":.8,"fill-outline-color":"black"}}),e.addSource("darsena",{type:"geojson",data:b.geometries.darsena}),e.addLayer({id:"darsena",type:"fill",source:"darsena",layout:{},paint:{"fill-outline-color":"black","fill-color":"#fff","fill-opacity":.8}}),e.addSource("naviglio",{type:"geojson",data:b.geometries.naviglio}),e.addLayer({id:"naviglio",type:"line",source:"naviglio",layout:{},paint:{"line-width":2,"line-color":"#000"}}),e.addLayer({id:"melchiorre-text",type:"symbol",source:"melchiorre",layout:{"text-field":"Melchiorre Gioia","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":14},paint:{"text-color":"#fff","text-halo-color":"#000000","text-halo-width":2}}),e.addLayer({id:"isola-text",type:"symbol",source:"isola",layout:{"text-field":"Isola / Porta Nuova","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":14},paint:{"text-color":"#fff","text-halo-color":"#000000","text-halo-width":2}}),e.addLayer({id:"centro-text",type:"symbol",source:"centro",layout:{"text-field":"Centro Storico","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":14},paint:{"text-color":"#fff","text-halo-color":"#000000","text-halo-width":2}}),e.addLayer({id:"darsena-text",type:"symbol",source:"darsena",layout:{"text-field":"Darsena","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":14},paint:{"text-color":"#fff","text-halo-color":"#000000","text-halo-width":2}}),e.setPaintProperty("water","fill-color","#ccc"),e.setPaintProperty("building","fill-color","#ccc"),e.setPaintProperty("landuse","fill-color","#ccc"),e.setPaintProperty("road","line-color","#ccc")})}}}}]),angular.module("ancoraApp").directive("scrollOnClick",function(){return{restrict:"A",link:function(a,b,c){b.on("click",function(a){a.preventDefault(),$("body").animate({scrollTop:$(c.href).offset().top-100},"slow")})}}}),angular.module("ancoraApp").directive("bgMapMini",function(){return{replace:!1,restrict:"A",link:function(a,b,c){mapboxgl.accessToken="pk.eyJ1IjoidGVvIiwiYSI6IllvZUo1LUkifQ.dirqtn275pAKdnqtLM2HSw";var d=new mapboxgl.Map({container:b[0],center:[9.1859,45.4654],zoom:12,maxZoom:16,minZoom:10,interactive:!1,style:"mapbox://styles/teo/ciu1f5enw00i52iol853ypazc"}),e=turf.bbox(turf.featureCollection([a.geometries.melchiorre.features[0],a.geometries.isola.features[0],a.geometries.centro.features[0],a.geometries.darsena.features[0]]));d.fitBounds([[e[0],e[1]],[e[2],e[3]]],{padding:20}),d.on("load",function(){d.addSource("melchiorre",{type:"geojson",data:a.geometries.melchiorre}),d.addLayer({id:"melchiorre",type:"fill",source:"melchiorre",layout:{},paint:{"fill-color":"#fff","fill-opacity":.8,"fill-outline-color":"black"}}),d.addSource("isola",{type:"geojson",data:a.geometries.isola}),d.addLayer({id:"isola",type:"fill",source:"isola",layout:{},paint:{"fill-color":"#fff","fill-opacity":.8,"fill-outline-color":"black"}}),d.addSource("centro",{type:"geojson",data:a.geometries.centro}),d.addLayer({id:"centro",type:"fill",source:"centro",layout:{},paint:{"fill-color":"#fff","fill-opacity":.8,"fill-outline-color":"black"}}),d.addSource("darsena",{type:"geojson",data:a.geometries.darsena}),d.addLayer({id:"darsena",type:"fill",source:"darsena",layout:{},paint:{"fill-outline-color":"black","fill-color":"#fff","fill-opacity":.8}}),d.addSource("naviglio",{type:"geojson",data:a.geometries.naviglio}),d.addLayer({id:"naviglio",type:"line",source:"naviglio",layout:{},paint:{"line-width":2,"line-color":"#000"}}),d.addLayer({id:"melchiorre-text",type:"symbol",source:"melchiorre",layout:{"text-field":"Melchiorre Gioia","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":14},paint:{"text-color":"#fff","text-halo-color":"#000000","text-halo-width":2}}),d.addLayer({id:"isola-text",type:"symbol",source:"isola",layout:{"text-field":"Isola / Porta Nuova","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":14},paint:{"text-color":"#fff","text-halo-color":"#000000","text-halo-width":2}}),d.addLayer({id:"centro-text",type:"symbol",source:"centro",layout:{"text-field":"Centro Storico","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":14},paint:{"text-color":"#fff","text-halo-color":"#000000","text-halo-width":2}}),d.addLayer({id:"darsena-text",type:"symbol",source:"darsena",layout:{"text-field":"Darsena","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":14},paint:{"text-color":"#fff","text-halo-color":"#000000","text-halo-width":2}}),d.setPaintProperty("water","fill-color","#ccc"),d.setPaintProperty("building","fill-color","#ccc"),d.setPaintProperty("landuse","fill-color","#ccc"),d.setPaintProperty("road","line-color","#ccc")})}}}),angular.module("ancoraApp").controller("ContactCtrl",["$location","$scope","$rootScope",function(a,b,c){c.$on("$routeChangeSuccess",function(c,d,e){b.location=a.path().split("/")[1]})}]),angular.module("ancoraApp").directive("labelconnection",function(){return{replace:!1,restrict:"A",link:function(a,b,c){d3.select(b[0]).on("mouseover",function(a){var c=d3.select(b[0]).select(".labelConnection");c.style("display","inline")}).on("mouseout",function(a){var c=d3.select(b[0]).select(".labelConnection");c.style("display","none")})}}}),angular.module("ancoraApp").directive("bsBreakpoint",["$window","$rootScope","$timeout",function(a,b,c){return{restrict:"A",link:function(d,e,f){var g=function(){var b=a.innerWidth;return 768>b?"extra small":b>=768&&992>b?"small":b>=992&&1200>b?"medium":b>=1200?"large":void 0},h=g(),i=null;c(function(){b.$broadcast("windowResize",h,i)}),angular.element(a).bind("resize",function(){var a=g();a!=h&&(i=h,h=a),b.$broadcast("windowResize",h,i)})}}}]),angular.module("ancoraApp").controller("DataCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("ancoraApp").run(["$templateCache",function(a){a.put("views/connection.html",'<div class="header"> <div class="navbar navbar-default navbar-fixed-top" role="navigation"> <div class="container-fluid"> <div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#js-navbar-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="#/">scandaglio</a> </div> <div class="navbar-collapse collapse" id="js-navbar-collapse"> <ul class="nav navbar-nav"> <li><a href="#/prologo">Prologo</a></li> <li><a href="#/cover/melchiorre" ng-class="{\'active\': areaTitle == \'melchiorre\'}">Melchiorre Gioia</a></li> <li><a href="#/cover/isola" ng-class="{\'active\': areaTitle == \'isola\'}">Isola / Porta Nuova</a></li> <li><a href="#/cover/centro" ng-class="{\'active\': areaTitle == \'centro\'}">Centro Storico</a></li> <li><a href="#/cover/darsena" ng-class="{\'active\': areaTitle == \'darsena\'}">Darsena</a></li> <li><a href="#/epilogo">Epilogo</a></li> </ul> </div> </div> </div> </div> <div class="videoWrapper"> <videogular ng-class="videoClass" vg-auto-play="false" vg-update-time="onUpdateTime($currentTime, $duration)" vg-player-ready="onPlayerReady($API)"> <vg-media vg-src="videoconfig.sources" vg-native-controls="false"> </vg-media> <vg-poster vg-url="videoconfig.plugins.poster"></vg-poster> </videogular> </div> <div class="container" id="containerConnection"> <div class="row" id="mapConnection" ng-if="breakpoint"> <div class="col-md-12 fullHeight"> <div class="fullHeight relative" mapconnection></div> <div class="prevConnection introHome"> <a ng-href="#/{{prev}}" class="btn btn-default" ng-class="{\'disabled\': !prev}" labelconnection> <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span> <span class="labelConnection"> {{prevLabel}}</span> </a> </div> <div class="nextConnection introHome"> <a ng-href="#/{{next}}" class="btn btn-default" ng-class="{\'disabled\': !next}" labelconnection> <span class="labelConnection">{{nextLabel}} </span><span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> </a> </div> </div> </div> <div class="row" id="chartsConnection"> <div class="col-md-4 fullHeight"> <div class="chartContainer fullHeight"> <h5>servizi commerciali</h5> <div class="barchart" data="chartOsm" ydomain="osmCategory" height="175" barchart></div> </div> </div> <div class="col-md-4 fullHeight"> <div class="chartContainer fullHeight"> <h5>servizi pubblici</h5> <div class="barchart" data="chartPgt" ydomain="pgtCategory" height="175" barchart></div> </div> </div> <div class="col-md-4 fullHeight"> <div class="chartContainer fullHeight"> <h5>Numero Affitti</h5> <div data="chartRent" height="70" marginleft="100" barchart></div> <div data="airbnb" height="40" legend="prezzo a notte airbnb" candlestick></div> <div data="idealista" height="40" legend="prezzo mese/m2 idealista" candlestick></div> </div> </div> </div> </div>'),a.put("views/cover.html",'<div class="header"> <div class="navbar navbar-default navbar-fixed-top" role="navigation"> <div class="container-fluid"> <div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#js-navbar-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="#/">scandaglio</a> </div> <div class="navbar-collapse collapse" id="js-navbar-collapse"> <ul class="nav navbar-nav"> <li><a href="#/prologo">Prologo</a></li> <li><a href="#/cover/melchiorre" ng-class="{\'active\': area == \'melchiorre\'}">Melchiorre Gioia</a></li> <li><a href="#/cover/isola" ng-class="{\'active\': area == \'isola\'}">Isola / Porta Nuova</a></li> <li><a href="#/cover/centro" ng-class="{\'active\': area == \'centro\'}">Centro Storico</a></li> <li><a href="#/cover/darsena" ng-class="{\'active\': area == \'darsena\'}">Darsena</a></li> <li><a href="#/epilogo">Epilogo</a></li> </ul> </div> </div> </div> </div> <div class="videoWrapper"> <videogular ng-class="videoClass" vg-auto-play="true" vg-player-ready="onPlayerReady($API)"> <vg-media vg-src="videoconfig.sources" vg-loop="true" vg-native-controls="false"> </vg-media> <vg-poster vg-url="videoconfig.plugins.poster"></vg-poster> </videogular> </div> <div class="container containerPadding"> <div class="row"> <div class="col-md-5 col-md-offset-1"> <div class="coverMd" btf-markdown ng-include="mdUrl"></div> <span class="introHome"> <a class="btn btn-default pull-right btnCover" ng-href="#/connection/{{area}}"> pedala <span class="glyphicon glyphicon-arrow-right" aria-hidden="true"></span> </a> </span> </div> </div> </div>'),a.put("views/data.html",'<div class="header prologo"> <div class="navbar navbar-default navbar-fixed-top" role="navigation"> <div class="container-fluid"> <div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#js-navbar-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="#/">scandaglio</a> </div> <div class="navbar-collapse collapse" id="js-navbar-collapse"> <ul class="nav navbar-nav"> <li><a href="#/data" class="active">Dati</a></li> </ul> </div> </div> </div> </div> <div class="container containerPadding data"> <div class="row"> <div class="col-md-5 col-md-offset-1"> <h3 class="titlePrologo">Dati</h3> </div> </div> <div class="row"> <div class="col-md-6 col-md-offset-1"> <div class="prologoText" btf-markdown ng-include="\'texts/data.md\'"></div> </div> </div> </div>'),a.put("views/epilogo.html",'<div class="header"> <div class="navbar navbar-default navbar-fixed-top" role="navigation"> <div class="container-fluid"> <div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#js-navbar-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="#/">scandaglio</a> </div> <div class="navbar-collapse collapse" id="js-navbar-collapse"> <ul class="nav navbar-nav"> <li><a href="#/prologo">Prologo</a></li> <li><a href="#/cover/melchiorre">Melchiorre Gioia</a></li> <li><a href="#/cover/isola">Isola / Porta Nuova</a></li> <li><a href="#/cover/centro">Centro Storico</a></li> <li><a href="#/cover/darsena">Darsena</a></li> <li><a href="#/epilogo" class="active">Epilogo</a></li> </ul> </div> </div> </div> </div> <div class="videoWrapper"> <videogular ng-class="videoClass" vg-auto-play="true" vg-player-ready="onPlayerReady($API)"> <vg-media vg-src="videoconfig.sources" vg-loop="true" vg-native-controls="false"> </vg-media> <vg-poster vg-url="videoconfig.plugins.poster"></vg-poster> </videogular> </div> <div class="container containerPadding"> <div class="row"> <div class="col-md-4 col-md-offset-6 introEpilogo"> <h1 class="pull-right" ng-bind-html="title"></h1> </div> </div> <div class="row"> <div class="col-md-6 col-md-offset-2 introEpilogo"> <div btf-markdown ng-include="\'texts/epilogo.md\'"></div> </div> </div> </div>'),a.put("views/header.html",'<div class="header"> <div class="navbar navbar-default navbar-fixed-top" role="navigation"> <div class="container-fluid"> <div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#js-navbar-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="#/">ancora</a> </div> <div class="collapse navbar-collapse" id="js-navbar-collapse"> <ul class="nav navbar navbar-nav"> <li><a ng-href="#/">Home</a></li> <li><a ng-href="#/prologo">Prologo</a></li> <li class="connection"><a ng-href="#/connection/melchiorre"><i class="fa fa-bicycle" aria-hidden="true"></i></a></li> <li><a ng-href="#/">Cassina de\' Pomm</a></li> <li class="connection"><a ng-href="#connection/isola"><i class="fa fa-bicycle" aria-hidden="true"></i></a></li> <li><a ng-href="#/">Isola</a></li> <li class="connection"><a ng-href="#connection/centro"><i class="fa fa-bicycle" aria-hidden="true"></i></a></li> <li><a ng-href="#/">Fossato</a></li> <li class="connection"><a ng-href="#connection/darsena"><i class="fa fa-bicycle" aria-hidden="true"></i></a></li> <li><a ng-href="#/">Darsena</a></li> <li class="connection"><a ng-href="#connection/"><i class="fa fa-bicycle" aria-hidden="true"></i></a></li> <li><a ng-href="#/">Conclusione</a></li> </ul> </div> </div> </div> </div>'),a.put("views/home.html",'<div class="header"> <div class="navbar navbar-default navbar-fixed-top" role="navigation"> <div class="container-fluid"> <div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#js-navbar-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="#/">scandaglio</a> </div> <div class="collapse navbar-collapse" id="js-navbar-collapse"> </div> </div> </div> </div> <div class="videoWrapper"> <videogular ng-class="videoClass" vg-auto-play="true" vg-player-ready="onPlayerReady($API)"> <vg-media vg-src="videoconfig.sources" vg-loop="true" vg-native-controls="false"> </vg-media> <vg-poster vg-url="videoconfig.plugins.poster"></vg-poster> </videogular> </div> <div class="container"> <div class="flexWrapper"> <div class="row introHome"> <div class="col-sm-12 col-md-6 col-md-offset-2"> <h1>{{title}}</h1> </div> </div> <div class="row introHome"> <div class="col-sm-12 col-md-2 homeControls"> <p> <a class="btn btn-default" href="#inoltre" role="button" scroll-on-click>inoltre</a> </p> <p> <a class="btn btn-default" href="#/data" role="button">dati</a> </p> <p> <a class="btn btn-default" href="#info" scroll-on-click role="button">info</a> </p> </div> <div class="col-sm-12 col-md-6 introHomeText"> <div btf-markdown ng-include="\'texts/abstract.md\'"></div> </div> <div class="col-sm-12 col-md-3"> <h4> CAPITOLO II° </h4> <div class="esplora"> <a class="btn btn-default btn-lg" href="#/prologo" role="button">esplora</a> </div> </div> </div> </div> <div class="flexWrapper"> <div class="row"> <div class="col-md-6 col-md-offset-2"> <div id="inoltre" btf-markdown ng-include="\'texts/introduzione.md\'"></div> </div> </div> </div> <div class="flexWrapper"> <div class="row"> <div class="col-md-6 col-md-offset-2"> <div id="info" btf-markdown ng-include="\'texts/info.md\'"></div> </div> </div> </div> </div>'),a.put("views/prologo.html",'<div class="header prologo"> <div class="navbar navbar-default navbar-fixed-top" role="navigation"> <div class="container-fluid"> <div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#js-navbar-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="#/">scandaglio</a> </div> <div class="navbar-collapse collapse" id="js-navbar-collapse"> <ul class="nav navbar-nav"> <li><a href="#/prologo" class="active">Prologo</a></li> <li><a href="#/cover/melchiorre">Melchiorre Gioia</a></li> <li><a href="#/cover/isola">Isola / Porta Nuova</a></li> <li><a href="#/cover/centro">Centro Storico</a></li> <li><a href="#/cover/darsena">Darsena</a></li> <li><a href="#/epilogo">Epilogo</a></li> </ul> </div> </div> </div> </div> <div class="mapWrapper"> <div class="bg-map hidden-xs" bg-map></div> </div> <div class="container containerPadding"> <div class="row"> <div class="col-md-5 col-md-offset-1"> <h3 class="titlePrologo">Quattro aree, quattro città</h3> </div> </div> <div class="row"> <div class="col-sm-12 visible-xs"> <div class="bg-map" bg-map-mini></div> </div> </div> <div class="row"> <div class="col-md-5 col-md-offset-1"> <div class="prologoText" btf-markdown ng-include="\'texts/prologo.md\'"></div> </div> </div> <div class="row"> <div class="col-md-5 col-md-offset-1"> <a href="#/cover/melchiorre" class="pull-right prologoBtn btn btn-default btn-large"> Pedala <span class="glyphicon glyphicon-arrow-right" aria-hidden="true"></span> </a> </div> </div> </div>');
}]);